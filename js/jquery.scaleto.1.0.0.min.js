(function(f){f.fn.scaleTo=function(n){for(var p=this.length,h=0;h<p;h++){var c=f(this[h]),b,g,d,e,a=f.extend({scale:"cover",parent:null,targetSize:null,parentSize:null,resize:!1,resizeWait:200},n);b=function(a,b){return a<b};var k=function(a,b){return a>b},l=k,m=b;a.target=c;a.parent=a.parent?f(a.parent):a.target.parent();"fit"==a.scale&&(l=b,m=k);a.targetSize?(c=a.targetSize.w,b=a.targetSize.h,g=a.targetSize.h/a.targetSize.w):(c=a.target.attr("src"),"undefined"!==typeof c&&null!==c?(b=new Image,
b.src=c,c=b.width,b=b.height):(c=a.target.width(),b=a.target.height()));g=b/c;(function q(){a.parentSize?(d=a.parentSize.w,e=a.parentSize.h):(d=a.parent.width(),e=a.parent.height());if(l(e/d,g)&&"landscape"!==a.scale||"portrait"===a.scale){var b=e/g;a.target.css({height:e,width:b,marginLeft:(b-d)/-2,marginTop:0,display:"block"})}else if(m(e/d,g)&&"portrait"!==a.scale||"landscape"==a.scale)b=g*d,a.target.css({width:d,height:b,marginTop:(b-e)/-2,marginLeft:0,display:"block"});a.resize?(scaleToTimer=
null,f(window).bind("resize.ScaleTo",function(){clearTimeout(scaleToTimer);scaleToTimer=setTimeout(q,a.resizeWait)})):f(window).unbind("resize.ScaleTo")})()}return this}})(jQuery);
